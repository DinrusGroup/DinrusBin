/*******************************************************************************

        copyright:      Copyright (c) 2004 Kris Bell. все rights reserved

        license:        BSD стиль: $(LICENSE)
      
        version:        Initial release: May 2004
        
        author:         Kris

*******************************************************************************/

module util.log.AppendSocket;

private import  util.log.Log;

private import  io.Console;

private import  io.stream.Buffered;
                
private import  net.device.Socket,
                net.InternetAddress;

/*******************************************************************************

        Добавщик для отправки форматированного вывода на Сокет.

*******************************************************************************/

public class ДобВСокет : Добавщик
{
        private ткст          кс;
        private Маска            маска_;
        private Бвыв            буфер;
        private Сокет          провод;
        private АдресИнтернета адрес;
        private бул            подключен;

        /***********************************************************************
                
                Создаёт с указанной раскладкой Выкладка и адресом. Указывается
				текст в конце строки, если его надо добавить в каждое сообщение 

        ***********************************************************************/

        this (АдресИнтернета адрес, Добавщик.Выкладка как = пусто, ткст кс=пусто);

        /***********************************************************************
                
                Возвращает фингерпринт для данного класса

        ***********************************************************************/

        Маска маска ();

        /***********************************************************************
                
                Вернуть имя данного класса

        ***********************************************************************/

        ткст имя ();
                
        /***********************************************************************
                
                Добавить событие на вывод. Если операции не удаются, возвращаемся
                к альтернативной стратегии журналирования, которая, вероятно, 
                потребует поддерживающий Добавщик, заданный при конструкции.
                На данный момент просто выводим на Кош, если вдруг сокет стал
				недоступен.               
                 
        ***********************************************************************/

        проц добавь (СобытиеЛога событие);

        /***********************************************************************
            
                Закрыть сокет, ассоциированный с данным Добавщиком
                    
        ***********************************************************************/

        проц закрой ();
}
